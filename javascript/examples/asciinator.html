<!DOCTYPE html>
<html>
	<head>
		<title>Asciinator</title>
		<meta charset="utf-8">
	</head>
	<script type="text/javascript">
		function check_compat() {
			var canvas = document.getElementById('render');
			var ctx = canvas.getContext('2d');
			if (window.File && window.FileReader && window.FileList && window.Blob) {
				var content = document.getElementById('content');
				content.innerHTML += '<input type="file" id="files" />';

				function handle_file(evt) {
					var files = evt.target.files;
					var file = null;
					for (var i=0; i < files.length; i++) {
						file = files[i];

						var reader = new FileReader();
						reader.onload = (function(theFile) {
							return function(result) {
								var img = new Image();
								img.onload = function() {
									ctx.drawImage(img, 0, 0);
									console.log(img);
								};
								img.src = result.target.result;
							};
						})(file);
						reader.readAsDataURL(file);
					}
				}

				document.getElementById('files').addEventListener('change', handle_file, false);
			} else {
				document.getElementById('content').innerHTML = '<h4> Your browser doesnt support File API :( <br> How about update your browser?</h4>';
			}
		}
	</script>
	<body onload="javascript:check_compat()">
		<canvas id="render" style="display: none;"></canvas>
		<div id="content"></div>
	</body>
</html>